<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Yael Ben Shalom</title>
    <link rel="icon" href="../img/favicon.png" type="image/png">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css">

    <!-- Custom Fonts -->
    <link
        href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
        rel='stylesheet' type='text/css'>
    <link
        href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic'
        rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css" type="text/css">

    <!-- Plugin CSS -->
    <link rel="stylesheet" href="../css/animate.min.css" type="text/css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/main.css" type="text/css">

    <meta name="viewport" content="width=device-width">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body id="page-top">
  <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand page-scroll" href="../#page-top">Yael Ben Shalom</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="page-scroll" href="../#portfolio_introduction">Projects</a>
                </li>
                <li>
                    <a class="page-scroll" href="../#other_platforms">Platforms</a>
                </li>
                <li>
                    <a class="page-scroll" href="../#skills">Skills</a>
                </li>
                <li>
                    <a class="page-scroll" href="../#about">About</a>
                </li>
                <li>
                    <a class="page-scroll" href="../#contact">Contact</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>
  <aside class="bg-primary"></aside>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<section class="no-padding" id="motorized_prosthetic_arm">
    <div class="container-fluid center">
        <div class="row no-gutter center">
            <div class="col-lg-8 col-lg-offset-2">

                <!-- Header -->
                <div class="modal-header">
                    <h2 class="text-center modal-title">Motorized Prosthetic Arm</h2>
                    <h5 class="text-center">Python | C | Biomechanics | Human Movement Analysis | Mechatronics | PID Control</h5>
                    <h6 class="text-center">April 2020 - December 2021</h6>
                </div>

                <!-- body -->
                <div class="modal-body">
                    <h3>Description</h3>
                    <p>In this project, I designed, built, and controlled a motorized prosthetic elbow that imitates healthy arm motion to help amputees prevent falling,
                        avoid injuries, and maintain balance while walking.
                        According to Kent and Major's research$^{[1]}$, asymmetries in body mass and motion affect the regulation of whole-body angular momentum in
                                individuals with upper limb absence and may increase fall risk.</p>
                    <p>To better predict the arm-body motion, I analyzed arm movement data patterns, simulated full arm dynamics, and found the relation between walking speed to the angular velocity of the arm.</p>
                    <p>Take a look at the project on my <a
                            href="https://github.com/YaelBenShalom/Motorized-Prosthetic-Arm" target="_blank"
                            rel="noopener"><u><b>GitHub</b></u></a> page.</p>
                    <p class="text-center">
                            <img src="../img/portfolio/motorized_prosthetic_arm/demo.gif" alt="Motorized prosthetic elbow" style="width:65%"></p>
                    <p class="img_description">Motorized prosthetic elbow</p>
                    <br>

                    <h3>Project Overview</h3>
                    <p>This project contained 4 parts:
                    <ol>
                        <li>Data collection</li>
                        <li>Arm motion analysis and modeling</li>
                        <li>Motor control to achieve the desired arm motion</li>
                        <li>Mechanical design of the prosthetic elbow</li>
                    </ol>
                    </p>
                    <br>

                    <h4>Data collection</h4>
                    <p>In the data collection part of the project, I focused mainly on measuring prosthetics characteristics and collecting body-arm motion data.</p>
                    <br>

                    <h5>Prosthetics Measurements</h5>
                    <p>To get the size and mass of an average prosthesis, I measured more than 20 different prosthetic arms. To find the center of mass (COM) location,
                    I used a center-of-mass estimation system$^{[1]}$. The system consisted of a wooden board with nails on both sides and a digital scale.
                    One side of the board was located on the scale, and the other side was located on a leveled table.</p>
                    <p>In the first step, I measured the center of mass of the wooden board:</p>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/COM_calculation1.png" width="50%">
                    </p>
                    <p class="img_description">The free-body diagram used to calculate the COM of the prosthesis</p>
                    <p>The COM of the board can be derived from the Torque Equilibrium equation of the system above:
                    $$ \sum M_1 = F_1 \cdot L_S - W_B \cdot L_B = 0 $$
                    $$ L_B = \frac{F_1 \cdot L_S}{W_B} $$
                    Where $ W_B = m_B g $ is the weight of the board.
                    </p>

                    <p>Similarly, the COM of a prosthesis can be found by locating it above the wooden board and examining the change Torque
                    Equilibrium equation, as described in the following image:</p>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/COM_calculation2.png" width="50%">
                    </p>
                    <p class="img_description">The free-body diagram used to calculate the COM of the wooden board</p>
                    <p>We can derive the COM of the prosthesis from the Torque Equilibrium equation of the updated system above:
                    $$ \sum M_2 = F_2 \cdot L_S + W_P \cdot L_P - W_B \cdot L_B = 0 $$
                    $$ L_P = \frac{F_2 \cdot L_S - W_B \cdot L_B}{W_P} $$
                    </p>
                    <br>

                    <h5>Body-Arm Motion Measurements</h5>
                    <p>To explore the body-arm motion while walking, and to find the correlation between walking speed and arm swing, I attached accelerometers to my
                    lower back, upper arm, and forearm, and measured the angles, velocities, and accelerations. An example of the results are presented in the following video:</p>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/accelerometer.gif" width="70%">
                    </p>
                    <p class="img_description">Accelerometer sensors - back, shoulder, and elbow accelerations</p>
                    <p>I used the collected data to model the arm motion in the next section of the project.</p>
                    <br>

                    <h4>Modeling a human arm as a double pendulum</h4>
                    <p>To Better understand the motion of a human arm and find a suitable motor to imitate the elbow motion,
                    I modeled the arm as a double pendulum system. I used the system Lagrangian and measured shoulder and elbow
                    angles to find the motion equations and extract the required elbow torque.</p>
                    <p>The double pendulum can be described using the following system sketch, where the masses are located
                    in the center of mass of every link:</p>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/double_pendulum_diagram.png" width="35%">
                    </p>
                    <p class="img_description">Modeling the arm as a double pendulum - system sketch</p>
                    <p>The kinetic and potential energy of the system is as follows:
                    $$ KE = \frac{1}{2} \cdot m_1 \cdot (\dot{x_1}^2 + \dot{y_1}^2) + \frac{1}{2} \cdot m_2 \cdot (\dot{x_2}^2 + \dot{y_2}^2) $$
                    $$ PE = m_1 \cdot g \cdot y1 + m_2 \cdot g \cdot y_2 $$

                    where $m_1$ and $m_2$ are the masses of the upper arm and the forearm (respectively), $R_1$ and $R_2$ are the distance from
                    the joint to the center of mass of the upper arm and the forearm (respectively), $g$ is the gravity constant, and:
                    $$ x_1 = R_1 \cdot sin(\theta_1) $$
                    $$ y_1 = -R_1 \cdot cos(\theta_1) $$
                    $$ x_2 = R_1 \cdot sin(\theta_1) + R_2 \cdot sin(\theta_1 + \theta_2) $$
                    $$ y_2 = -R_1 \cdot cos(\theta_1) - R_2 \cdot cos(\theta_1 + \theta_2) $$
                    </p>
                    <p>The Lagrangian is the difference between the two energies:
                    $$ L(t) = KE - PE $$
                    </p>
                    <p>The Euler-Lagrange equation, the connection between the joints torque to the joints angles, can be computed using the
                    following equation:
                    $$ \tau_i(t) =
                    \biggl(\frac{\partial L}{\partial \theta_i'}\biggr)' - \frac{\partial L}{\partial \theta_i} $$
                    where $i$ is the joint number.
                    </p>
                    <p>Plugging in the measured angles returns the torque as a function of time. After scanning the maximum torque and velocity
                    over all trials, I could find the maximum requirements for the motor.</p>
                    <p>The following video shows an animation of the arm motion, represented as a double pendulum:</p>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/arm_pendulum_animation.gif" width="75%">
                    </p>
                    <p class="img_description">Modeling the arm as a double pendulum - system animation</p>
                    <br>

                    <h4>Motor control</h4>
                    <p>To control the motor, I used a 2 layer control system - feedback current and position control. The current was controlled
                    by the ODrive's controller, and the position was controlled by a feedback PID controller (with an optional feedforward component).</p>
                    <p>The control system diagram:</p>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/control_diagram.png" width="70%">
                    </p>
                    <p class="img_description">Control system diagram</p>
                    <p>The PID position control diagram:</p>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/pid_diagram.png" width="45%">
                    </p>
                    <p class="img_description">PID controller diagram</p>
                    <br>
                    <p>An example of motor position control using the PID controller. The blue plot is the input angles, the red plot is the
                    controlled output angles, and the second graph is the error changing with time:</p>
                    <p class="text-center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/lab_device.gif" alt="Motorized prosthetic elbow" style="width:30%"></p>
                    <p class="img_description">Motorized prosthetic elbow</p>
                    <br>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/graph.png" width="100%">
                    </p>  
                    <p class="img_description">Position control input (blue), output (red), and position error</p>
                    <p>After tunning the controller, I reached the maximum error goal of 5% from the maximum angle.</p>
                    <br>
                    <p>The results of the motor control for different walking speed:</p>
                    <div class="row no-gutter">
                        <div class="col-lg-2 col-sm-2">
                            <img src="../img/portfolio/motorized_prosthetic_arm/06ms.gif"
                                alt="Walking speed 0.6" style="width:140%">
                            <p class="img_description" style="width:130%">walking speed $ 0.6 \frac{m}{s} $</p>
                        </div>
                        <div class="col-lg-2 col-sm-2 col-lg-offset-1 col-sm-offset-1">
                            <img src="../img/portfolio/motorized_prosthetic_arm/08ms.gif"
                                alt="Walking speed 0.8" style="width:140%">
                            <p class="img_description" style="width:130%">walking speed $ 0.8 \frac{m}{s} $</p>
                        </div>
                        <div class="col-lg-2 col-sm-2 col-lg-offset-1 col-sm-offset-1">
                            <img src="../img/portfolio/motorized_prosthetic_arm/10ms.gif"
                                alt="Walking speed 1.0" style="width:140%">
                            <p class="img_description" style="width:130%">walking speed $ 1.0 \frac{m}{s} $</p>
                        </div>
                        <div class="col-lg-2 col-sm-2 col-lg-offset-1 col-sm-offset-1">
                            <img src="../img/portfolio/motorized_prosthetic_arm/12ms.gif"
                                alt="Walking speed 1.2" style="width:140%">
                            <p class="img_description" style="width:130%">walking speed $ 1.2 \frac{m}{s} $</p>
                        </div>
                    </div>
                    <br>

                    <h4>Mechanical design</h4>
                    <p>The system contained several key parts:
                    <ol>
                        <li>Motor (T-Motor, R60 KV115)</li>
                        <li>Encoder PCB (Designed for a Magnetic Rotary Encoder (AS5048A))</li>
                        <li>Driver (ODrive V3.6, 24V)</li>
                        <li>Odrive Adaptor PCB (Adaptor from ODrive connector to ethernet connector)</li>
                        <li>Elbow packaging (based on Fillauer E-400)</li>
                        <li>Battery</li>
                    </ol>
                    </p>
                    <br>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/mech_design.png" width="50%">
                    </p>  
                    <p class="img_description">The mechanical design of the device</p>
                    <br>
                    <p>The mechanical design was based on <a href="https://www.spsco.com/hosmer-e-400.html"
                        target="_blank" rel="noopener"><u><b>Fillauer's E-400</b></u></a> prosthetic elbow design:
                    </p>
                    <p align="center">
                        <img src="../img/portfolio/motorized_prosthetic_arm/E-400.png" width="30%">
                    </p>  
                    <p class="img_description">Fillauer E-400 prosthetic elbow</p>
                    <p>All 3D CAD files can be found <a href="https://github.com/YaelBenShalom/Motorized-Prosthetic-Arm/tree/master/mech_design" target="_blank"
                        rel="noopener"><u><b>here</b></u></a>, and all circuit board schematics and manufacture files can be found
                        <a href="https://github.com/YaelBenShalom/Motorized-Prosthetic-Arm/tree/master/board_design" target="_blank"
                            rel="noopener"><u><b>here</b></u></a>.
                    </p>
                    <br>

                    <h3>Future Work</h3>
                    <p>
                    <ol>
                        <li>Test the system on patients with above-elbow amputees.</li>
                        <li>Replace the ODrive with a smaller PCB, that will be installed in the elbow module. The PCB will contain
                            a microprocessor, motor driver, current sensor, etc., to replace the ODrive's functionality.<br>
                            A preliminary design of such PCB can be found <a href="https://github.com/YaelBenShalom/Motorized-Prosthetic-Arm/tree/master/board_design/main_pcb" target="_blank"
                                rel="noopener"><u><b>here</b></u></a>.</li>
                    </ol>
                    </p>
                    <br>

                    <h3>References</h3>
                    <ul>
                        <p>[1] Kent JA, Major MJ. Asymmetry of mass and motion affects the regulation of whole-body angular
                            momentum in individuals with upper limb absence, Clin Biomech (Bristol, Avon). 2020 Jun;76:105015</p>
                        <p>[2] Major MJ. Fall Prevalence and Contributors to the Likelihood of Falling in Persons With Upper
                            Limb Loss. Phys Ther. 2019 Apr 1;99(4):377-387</p>
                        <p>[3] Major MJ, McConn SM, Zavaleta JL, Stine R, Gard SA. Effects of upper limb loss and prosthesis
                            use on proactive mechanisms of locomotor stability. J Electromyogr Kinesiol. 2019 Oct;48:145-151</p>
                        <p>[4] McConn SM. Prosthetic influence on gait stability in individuals with upper limb loss.
                            Master's Thesis, Biomedical Engineering, Northwestern University. 2016 Jun</p>
                    </ul>
                </div>

                <!-- footer -->
                <div class="modal-footer">
                    <div class="text-center">
                        <p></p>
                        <form action="https://github.com/YaelBenShalom/Motorized-Prosthetic-Arm" method="get"
                            target="_blank">
                            <button type="submit" class="btn btn-primary">Checkout Project on Github</button>
                        </form>
                        <p></p>
                        <button type="button" class="btn btn-primary center" onclick="history.back()">Back To
                            Portfolio</button>
                        <p></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
  <!-- jQuery -->
<script src="../js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="../js/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="../js/jquery.easing.min.js"></script>
<script src="../js/jquery.fittext.js"></script>
<script src="../js/wow.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="../js/creative.js"></script>
</body>

</html>